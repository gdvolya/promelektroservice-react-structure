{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{collection,getDocs,deleteDoc,doc}from\"firebase/firestore\";import{db}from\"../firebase\";import*as XLSX from\"xlsx\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=_ref=>{let{enableExport}=_ref;const[submissions,setSubmissions]=useState([]);const[password,setPassword]=useState(\"\");const[authenticated,setAuthenticated]=useState(false);useEffect(()=>{if(authenticated){fetchSubmissions();}},[authenticated]);const fetchSubmissions=async()=>{const querySnapshot=await getDocs(collection(db,\"submissions\"));setSubmissions(querySnapshot.docs.map(doc=>({id:doc.id,...doc.data()})));};const exportToExcel=()=>{const worksheet=XLSX.utils.json_to_sheet(submissions.map(_ref2=>{let{id,...rest}=_ref2;return rest;}));const workbook=XLSX.utils.book_new();XLSX.utils.book_append_sheet(workbook,worksheet,\"Заявки\");XLSX.writeFile(workbook,\"submissions.xlsx\");};const handleDelete=async id=>{if(window.confirm(\"Ви впевнені, що хочете видалити цю заявку?\")){await deleteDoc(doc(db,\"submissions\",id));fetchSubmissions();}};const handleLogin=()=>{const isAuth=password===\"admin123\";setAuthenticated(isAuth);setPassword(\"\");};if(!authenticated){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u0445\\u0456\\u0434 \\u0434\\u043E \\u0430\\u0434\\u043C\\u0456\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u0456\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0456\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"})]});}return/*#__PURE__*/_jsxs(\"main\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0410\\u0434\\u043C\\u0456\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0406\\u043C\\u2019\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u043E\\u0432\\u0456\\u0434\\u043E\\u043C\\u043B\\u0435\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0456\\u0457\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:submissions.map((s,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.name}),/*#__PURE__*/_jsx(\"td\",{children:s.email}),/*#__PURE__*/_jsx(\"td\",{children:s.phone}),/*#__PURE__*/_jsx(\"td\",{children:s.message}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(s.id),children:\"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438\"})})]},s.id))})]}),enableExport&&/*#__PURE__*/_jsx(\"button\",{onClick:exportToExcel,style:{marginTop:\"20px\"},children:\"\\u0415\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0432 Excel\"})]});};export default AdminPanel;","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","deleteDoc","doc","db","XLSX","jsx","_jsx","jsxs","_jsxs","AdminPanel","_ref","enableExport","submissions","setSubmissions","password","setPassword","authenticated","setAuthenticated","fetchSubmissions","querySnapshot","docs","map","id","data","exportToExcel","worksheet","utils","json_to_sheet","_ref2","rest","workbook","book_new","book_append_sheet","writeFile","handleDelete","window","confirm","handleLogin","isAuth","style","padding","children","type","placeholder","value","onChange","e","target","onClick","border","cellPadding","s","idx","name","email","phone","message","marginTop"],"sources":["C:/Users/User/Desktop/promelektroservice-react-structure/src/pages/AdminPanel.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { collection, getDocs, deleteDoc, doc } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst AdminPanel = ({ enableExport }) => {\r\n  const [submissions, setSubmissions] = useState([]);\r\n  const [password, setPassword] = useState(\"\");\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (authenticated) {\r\n      fetchSubmissions();\r\n    }\r\n  }, [authenticated]);\r\n\r\n  const fetchSubmissions = async () => {\r\n    const querySnapshot = await getDocs(collection(db, \"submissions\"));\r\n    setSubmissions(querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    const worksheet = XLSX.utils.json_to_sheet(submissions.map(({ id, ...rest }) => rest));\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Заявки\");\r\n    XLSX.writeFile(workbook, \"submissions.xlsx\");\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm(\"Ви впевнені, що хочете видалити цю заявку?\")) {\r\n      await deleteDoc(doc(db, \"submissions\", id));\r\n      fetchSubmissions();\r\n    }\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    const isAuth = password === \"admin123\";\r\n    setAuthenticated(isAuth);\r\n    setPassword(\"\");\r\n  };\r\n\r\n  if (!authenticated) {\r\n    return (\r\n      <div style={{ padding: \"20px\" }}>\r\n        <h2>Вхід до адмін-панелі</h2>\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Введіть пароль\"\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n        />\r\n        <button onClick={handleLogin}>Увійти</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main style={{ padding: \"20px\" }}>\r\n      <h1>Адмін-панель</h1>\r\n      <table border=\"1\" cellPadding=\"8\">\r\n        <thead>\r\n          <tr>\r\n            <th>Ім’я</th>\r\n            <th>Email</th>\r\n            <th>Телефон</th>\r\n            <th>Повідомлення</th>\r\n            <th>Дії</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {submissions.map((s, idx) => (\r\n            <tr key={s.id}>\r\n              <td>{s.name}</td>\r\n              <td>{s.email}</td>\r\n              <td>{s.phone}</td>\r\n              <td>{s.message}</td>\r\n              <td>\r\n                <button onClick={() => handleDelete(s.id)}>Видалити</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {enableExport && (\r\n        <button onClick={exportToExcel} style={{ marginTop: \"20px\" }}>\r\n          Експортувати в Excel\r\n        </button>\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}